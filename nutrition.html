<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nutrition</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDxC--WywLZ13NZdiouncGLb8SaE-3GggQ",
    authDomain: "site-perso-b7c08.firebaseapp.com",
    databaseURL: "https://site-perso-b7c08-default-rtdb.firebaseio.com",
    projectId: "site-perso-b7c08",
    storageBucket: "site-perso-b7c08.firebasestorage.app",
    messagingSenderId: "1015317206704",
    appId: "1:1015317206704:web:19e1d3762bda8a7cf78d75",
    measurementId: "G-MMLMV2DPNT"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);
  
  window.db = db;
</script>


<!-- Firebase Helpers -->
<script src="firebase-helpers.js"></script>
  
</head>
<body class="nutrition">
  <header>
    <h1>ğŸ½ï¸ Nutrition</h1>
    <nav>
      <button onclick="location.href='dashboard.html'" class="active">ğŸ“Š Dashboard</button>
      <button onclick="location.href='vie-perso.html'">ğŸ“… Vie Perso</button>
      <button onclick="location.href='finance.html'">ğŸ’° Finance</button>
      <button onclick="location.href='objectifs.html'">ğŸ¯ Objectifs</button>
      <button onclick="location.href='projets.html'">ğŸš€ Projets</button>
      <button onclick="location.href='nutrition.html'" class="active">ğŸ½ï¸ Nutrition</button>
      <button onclick="location.href='notes.html'">ğŸ“ Notes</button>
    </nav>
    <button onclick="logout()" class="logout">ğŸšª DÃ©connexion</button>

  </header>

  <main>
    <!-- Profil et Objectifs -->
    <section>
      <h2>ğŸ‘¤ Mon Profil Nutritionnel</h2>
      <div class="profile-container">
        <div class="profile-inputs">
          <div class="input-group">
            <label>Ã‚ge</label>
            <input type="number" id="age" placeholder="25">
          </div>
          <div class="input-group">
            <label>Poids (kg)</label>
            <input type="number" id="weight" placeholder="70">
          </div>
          <div class="input-group">
            <label>Taille (cm)</label>
            <input type="number" id="height" placeholder="175">
          </div>
          <div class="input-group">
            <label>Objectif</label>
            <select id="goal">
              <option value="muscle">Prise de muscle</option>
              <option value="maintenance">Maintenance</option>
              <option value="fatloss">Perte de graisse</option>
            </select>
          </div>
          <div class="input-group">
            <label>Niveau d'activitÃ©</label>
            <select id="activity">
              <option value="1.2">SÃ©dentaire</option>
              <option value="1.375">LÃ©gÃ¨rement actif</option>
              <option value="1.55">ModÃ©rÃ©ment actif</option>
              <option value="1.725">TrÃ¨s actif</option>
              <option value="1.9">ExtrÃªmement actif</option>
            </select>
          </div>
          <button onclick="calculateGoals()" class="save">ğŸ¯ Calculer mes objectifs</button>
        </div>
        
        <div class="goals-display" id="goals-display">
          <div class="goal-card">
            <h3>Objectifs Journaliers</h3>
            <div class="macro-goal">
              <span>Calories: <strong id="calorie-goal">0</strong> kcal</span>
            </div>
            <div class="macro-goal">
              <span>ProtÃ©ines: <strong id="protein-goal">0</strong> g</span>
            </div>
            <div class="macro-goal">
              <span>Glucides: <strong id="carbs-goal">0</strong> g</span>
            </div>
            <div class="macro-goal">
              <span>Lipides: <strong id="fat-goal">0</strong> g</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Recherche d'aliments -->
    <section>
      <h2>ğŸ” Recherche d'Aliments</h2>
      <div class="search-container">
        <input type="text" id="food-search" placeholder="Rechercher un aliment (ex: pomme, poulet, riz...)">
        <button onclick="searchFood()">ğŸ” Rechercher</button>
      </div>
      <div id="search-results" class="search-results"></div>
    </section>

    <!-- Journal alimentaire -->
    <section>
      <h2>ğŸ“ Journal Alimentaire du Jour</h2>
      <div class="meal-sections">
        <!-- Petit-dÃ©jeuner -->
        <div class="meal-section">
          <h3>â˜€ï¸ Petit-dÃ©jeuner</h3>
          <div id="breakfast-foods" class="foods-list"></div>
          <button onclick="addFoodToMeal('breakfast')" class="add-btn">+ Ajouter aliment</button>
        </div>

        <!-- Encas matin -->
        <div class="meal-section">
          <h3>ğŸ•°ï¸ Encas Matin</h3>
          <div id="morning-snack-foods" class="foods-list"></div>
          <button onclick="addFoodToMeal('morning-snack')" class="add-btn">+ Ajouter aliment</button>
        </div>

        <!-- DÃ©jeuner -->
        <div class="meal-section">
          <h3>ğŸŒ DÃ©jeuner</h3>
          <div id="lunch-foods" class="foods-list"></div>
          <button onclick="addFoodToMeal('lunch')" class="add-btn">+ Ajouter aliment</button>
        </div>

        <!-- GoÃ»ter -->
        <div class="meal-section">
          <h3>ğŸ GoÃ»ter</h3>
          <div id="afternoon-snack-foods" class="foods-list"></div>
          <button onclick="addFoodToMeal('afternoon-snack')" class="add-btn">+ Ajouter aliment</button>
        </div>

        <!-- DÃ®ner -->
        <div class="meal-section">
          <h3>ğŸŒ™ DÃ®ner</h3>
          <div id="dinner-foods" class="foods-list"></div>
          <button onclick="addFoodToMeal('dinner')" class="add-btn">+ Ajouter aliment</button>
        </div>
      </div>
    </section>

    <!-- ActivitÃ© sportive -->
<!-- ActivitÃ© sportive -->
<!-- ActivitÃ© sportive -->
<section>
  <h2>ğŸƒâ€â™‚ï¸ ActivitÃ© Sportive</h2>
  <div class="sport-container">
    <div class="input-group">
      <label>CatÃ©gorie</label>
      <select id="sport-category" onchange="updateSportActivities()">
        <option value="all">Toutes les catÃ©gories</option>
        <option value="cardio">ğŸƒâ€â™‚ï¸ Cardio</option>
        <option value="velo">ğŸš´â€â™‚ï¸ VÃ©lo</option>
        <option value="natation">ğŸŠâ€â™‚ï¸ Natation</option>
        <option value="musculation">ğŸ’ª Musculation</option>
        <option value="collectif">âš½ Sports collectifs</option>
        <option value="raquette">ğŸ¾ Sports de raquette</option>
        <option value="danse">ğŸ’ƒ Danse</option>
        <option value="martial">ğŸ¥‹ Arts martiaux</option>
        <option value="autre">ğŸ¯ Autres sports</option>
      </select>
    </div>

    <div class="input-group">
      <label>ActivitÃ© spÃ©cifique</label>
      <select id="sport-type" onchange="calculateCaloriesBurned()">
        <option value="">Choisir une activitÃ©</option>
      </select>
    </div>

    <div class="input-group">
      <label>DurÃ©e (minutes)</label>
      <input type="number" id="sport-duration" placeholder="30" min="1" onchange="calculateCaloriesBurned()">
    </div>

    <div class="input-group">
      <label>Calories brÃ»lÃ©es</label>
      <input type="number" id="sport-calories" placeholder="Calcul automatique" readonly>
    </div>

    <button onclick="addSportActivity()" class="add-btn">â• Ajouter</button>
  </div>
  <div id="sport-activities" class="sport-activities"></div>
</section>
    <!-- RÃ©sumÃ© et progression -->
    <section>
      <h2>ğŸ“Š RÃ©sumÃ© Nutritionnel</h2>
      <div class="nutrition-summary">
        <div class="total-calories">
          <h3>Calories Total: <span id="total-calories-consumed">0</span> / <span id="total-calories-goal">0</span> kcal</h3>
          <div class="progress-bar">
            <div class="progress-fill" id="calories-progress"></div>
          </div>
        </div>
        
        <div class="macros-progress">
          <div class="macro-progress">
            <span>ProtÃ©ines: <span id="protein-consumed">0</span>/<span id="protein-target">0</span>g</span>
            <div class="progress-bar">
              <div class="progress-fill" id="protein-progress"></div>
            </div>
          </div>
          <div class="macro-progress">
            <span>Glucides: <span id="carbs-consumed">0</span>/<span id="carbs-target">0</span>g</span>
            <div class="progress-bar">
              <div class="progress-fill" id="carbs-progress"></div>
            </div>
          </div>
          <div class="macro-progress">
            <span>Lipides: <span id="fat-consumed">0</span>/<span id="fat-target">0</span>g</span>
            <div class="progress-bar">
              <div class="progress-fill" id="fat-progress"></div>
            </div>
          </div>
        </div>

        <div class="calories-balance">
          <h3>Balance Calorique: <span id="calories-balance">0</span> kcal</h3>
          <p id="balance-message"></p>
        </div>
      </div>
      
    </section>

    <div class="actions">
      <button onclick="saveNutrition()" class="save">ğŸ’¾ Sauvegarder</button>
      <button onclick="clearDay()" class="clear">ğŸ—‘ï¸ Effacer la journÃ©e</button>
      <button onclick="downloadNutritionPDF()" class="download">ğŸ“Š TÃ©lÃ©charger Rapport</button>
    </div>
  </main>

  <script src="script.js"></script>
</body>
</html>
<script>
  // Mettre Ã  jour la navigation active
  document.addEventListener('DOMContentLoaded', function() {
      // Retirer la classe active de tous les boutons
      const navButtons = document.querySelectorAll('header nav button');
      navButtons.forEach(button => {
          button.classList.remove('active');
      });
      
      // Ajouter la classe active au bouton de la page actuelle
      const currentPage = window.location.pathname.split('/').pop();
      let activeButton = null;
      
      switch(currentPage) {
          case 'vie-perso.html':
              activeButton = document.querySelector('header nav button[onclick*="vie-perso"]');
              break;
          case 'finance.html':
              activeButton = document.querySelector('header nav button[onclick*="finance"]');
              break;
          case 'objectifs.html':
              activeButton = document.querySelector('header nav button[onclick*="objectifs"]');
              break;
          case 'projets.html':
              activeButton = document.querySelector('header nav button[onclick*="projets"]');
              break;
          case 'nutrition.html':
              activeButton = document.querySelector('header nav button[onclick*="nutrition"]');
              break;
          case 'dashboard.html':
              activeButton = document.querySelector('header nav button[onclick*="dashboard"]');
              break;
              case 'notes.html':
              activeButton = document.querySelector('header nav button[onclick*="notes"]');
              break;

      }
      
      if (activeButton) {
          activeButton.classList.add('active');
      }
  });

  </script>

